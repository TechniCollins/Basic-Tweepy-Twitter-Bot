# Basic-Tweepy-Twitter-Bot
A twitter bot that utilizes Twitter API and uses Tweepy library to control user accounts on Twitter.

Disclaimer; Some of the  designs in this section don’t comply with the Twitter TOS and are just a way of learning how to utilize the API. I am not responsible for how you choose to use the code.

Languages/Tools used to create the twitter bot

Python - This language is used for the backend
Tweepy library - this python library is used to connect to twitter API and is the brains behind the bot.
pythonenywhere is the service that is used to host the bots so that it stays active 24/7. But you may host it on your own pc or use a different service.

Basic bot creation process

STEP 1: Create developer account

STEP 2: Create a folder where your bot will live

STEP 3: Copy the following files;

authentication.py - this file contains the credentials required to control the twitter account using API
replymentions.py - the file responsible for replying to mentions
lastreplied.txt - the file that holds last tweet that mentioned authenticate user
keywords.py - the file responsible for liking, retweeting and replying to tweets with specified hashtags and keywords
tweettrends.py - the file responsible for making tweets with very specific trend names


STEP 4: Edit the files as follows:
authentication.py
Copy the credentials appropriately

replymentions.py 
Edit this line; enter the keyword which the user wants to respond to when used along with a mention

 if 'hashtag or keyword' in mention.full_text.lower():

edit this line; Enter the response the client would like to give their customer

 api.update_status('@' + mention.user.screen_name + 'Custom response here', mention.id)

lastreplied.txt
This file is blank by default. However, for the bot to work, there MUST be a value. The value of type long can be obtained using this code:

mentions = api.mentions_timeline()
print(mentions[0].id)

after obtaining the value, paste it into the file. Never alter that file again

keywords.py
Edit the following lines according to user keyword or hashtag and custom response needs

keyworded_tweet = api.search(q = "your keyword or hashtag here", since_id = keyword_since_id)
 
api.update_status('@' + keyworded_tweet.user.screen_name + ' Your response here', keyworded_tweet.id)

add authenticated user id here so that you don't reply, retweet or like your own tweet;

if keyworded_tweet.user.id_str != "user id here":

Keyword_since_id_file.txt
This file is blank by default. However, for the bot to work, there MUST be a value. The value can be obtained using this code:

keyworded_tweet = api.search(q = "your keyword here")
print(keyworded_tweet[-1].id_str)
after obtaining the value, paste it into the file. Never alter that file again

tweettrends.py
Edit the following lines according to trends the client wants to participate in
if "hashtag or keyword" in trend['name']:

tweet_with_trends = "Custom response here\n"


Make the welcome message
Tweepy does not support creation of welcome messages. Therefore Twurl will be used to do this.
Begin by installing ruby if it's not installed
open a terminal and install twurl using gem as follows

           	gem install twurl

open a terminal and type the following:

twurl authorize --consumer-key "consumer_token here" --consumer-secret "consumer_secret here"

open the url returned on your browser
log in to your twitter account and paste the authorization code given. 
           If the authorization succeeds, twurl can now interact with the api

Type the following code to declare a welcome message


twurl -A 'Content-type: application/json' /1.1/direct_messages/welcome_messages/new.json -d '{"name": "Welcome message", "welcome_message": {"message_data": {"text": "Hey there, I will get to you soon. This message has been autogenerated"}}}'

Copy the object returned to important.txt because you’ll need it to set the message as default and to change settings in future.

Paste this code to make the message default

twurl -A 'Content-type: application/json' -X POST /1.1/direct_messages/welcome_messages/rules/new.json -d '{"welcome_message_rule": {"welcome_message_id": "id from previous request here"}}'


Note:
Ensure that the authenticated user has enabled Receive message requests in twitter DM settings. Otherwise, this error will be returned

{"errors":[{"code":214,"message":"owner must allow dms from anyone"}]}


The next step depends on which server you want to deploy your tweet to. I recommend hosting it on a free version of pythonanywhere if paying monthly is not in your budget. 

STEP 5: Run your bot on a server. You will have to upload files if you’re using a live server
HOSTING
In order to host on pythonanywhere you’ll have to create an account. You’ll also have to install tweepy on the server.

Open a bash console and paste; 

pip3.8 install --user tweepy

Run the following command to start your bot 

python3.8 'mytwitterbot/replymentions.py'
